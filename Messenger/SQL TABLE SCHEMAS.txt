-- Table for User Data

CREATE TABLE `USERS` (
 `Id` int(11) NOT NULL AUTO_INCREMENT,
 `Username` varchar(50) CHARACTER SET utf8 NOT NULL,
 `Email` varchar(255) CHARACTER SET utf8 NOT NULL,
 `Password` varchar(50) CHARACTER SET utf8 NOT NULL,
 PRIMARY KEY (`Id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1



-- Table for User to User Relationship

CREATE TABLE `CONTACTS` (
 `Id` int(11) NOT NULL AUTO_INCREMENT,
 `MAIN_USER` int(11) NOT NULL,
 `CONN_USER` int(11) NOT NULL,
 PRIMARY KEY (`Id`),
 KEY `FK_USERS_MAIN` (`MAIN_USER`),
 KEY `FK_USERS_CONN` (`CONN_USER`),
 CONSTRAINT `FK_USERS_CONN` FOREIGN KEY (`CONN_USER`) REFERENCES `USERS` (`Id`),
 CONSTRAINT `FK_USERS_MAIN` FOREIGN KEY (`MAIN_USER`) REFERENCES `USERS` (`Id`)
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=latin1



-- Table for messages

CREATE TABLE `MESSAGES` (
 `Id` int(11) NOT NULL AUTO_INCREMENT,
 `Content` varchar(1000) CHARACTER SET utf8 NOT NULL,
 `Time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 `FromUser` int(11) NOT NULL,
 `ToUser` int(11) NOT NULL,
 PRIMARY KEY (`Id`),
 KEY `FK_FOREIGN_FROM_USER` (`FromUser`),
 KEY `FK_FOREIGN_TO_USER` (`ToUser`),
 CONSTRAINT `FK_FOREIGN_FROM_USER` FOREIGN KEY (`FromUser`) REFERENCES `USERS` (`Id`),
 CONSTRAINT `FK_FOREIGN_TO_USER` FOREIGN KEY (`ToUser`) REFERENCES `USERS` (`Id`)
) ENGINE=InnoDB AUTO_INCREMENT=40 DEFAULT CHARSET=latin1